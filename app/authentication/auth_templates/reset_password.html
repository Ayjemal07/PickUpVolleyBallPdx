{% extends 'base.html' %}
{% block content %}
<style>
    .password-wrapper {
        position: relative;
        display: flex;
        align-items: center;
    }
    .password-wrapper .input-field {
        width: 100%;
        padding-right: 40px; /* Make space for the icon */
    }
    .password-wrapper .toggle-password {
        position: absolute;
        right: 15px;
        cursor: pointer;
        color: #6c757d;
    }
</style>

<div class="full-width-container">
    <div class="form-background">
        <h2>Reset Your Password</h2>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div id="flash-messages">
                    {% for category, message in messages %}
                        <div class="alert {{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <form method="POST" class="form-style">
            <div class="form-group">
                <label for="password">New Password:</label>
                <div class="password-wrapper">
                    <input type="password" id="password" name="password" required class="input-field"
                    placeholder="Minimum 8 chars, upper/lowercase, number, special character">
                    <i class="bi bi-eye-slash toggle-password"></i>
                </div>
            </div> 
            <button type="submit" class="submit-btn">Reset Password</button>
        </form>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const togglePasswordIcons = document.querySelectorAll('.toggle-password');
        togglePasswordIcons.forEach(icon => {
            icon.addEventListener('click', function () {
                const passwordField = this.previousElementSibling;
                const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordField.setAttribute('type', type);
                
                this.classList.toggle('bi-eye');
                this.classList.toggle('bi-eye-slash');
            });
        });
    });
</script>
{% endblock %}